---
phase: 01-foundation-setup
plan: 01
type: execute
---

<objective>
Firebase projesi kurulumu ve TypeScript ile Cloud Functions temel yapısının hazırlanması.

Purpose: Instagram otomasyonu için serverless backend infrastructure'ı oluşturmak.
Output: Çalışan Firebase Functions projesi, TypeScript yapısı, test edilmiş ilk deploy.
</objective>

<execution_context>
@~/.claude/skills/create-plans/workflows/execute-phase.md
@~/.claude/skills/create-plans/templates/summary.md
@~/.claude/skills/create-plans/references/checkpoints.md
</execution_context>

<context>
@.planning/BRIEF.md
@.planning/ROADMAP.md
@README.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Firebase projesi oluştur ve Functions initialize et</name>
  <files>firebase.json, .firebaserc, functions/package.json, functions/tsconfig.json, functions/src/index.ts, .gitignore</files>
  <action>
    1. Firebase CLI kontrol et (firebase --version), yoksa kurulum talimatı ver
    2. `firebase login` ile giriş yap (eğer değilse)
    3. `firebase init functions` komutunu çalıştır:
       - Yeni proje oluştur (create new project) veya mevcut proje seç
       - Language: TypeScript
       - ESLint: Yes
       - Dependencies install: Yes
       - Region seçimi: europe-west1 (Belçika)
    4. firebase.json'da region'ı kontrol et, gerekirse europe-west1 olarak ayarla
    5. .gitignore'a ekle: functions/node_modules/, functions/lib/, .firebase/, *.log
    6. functions/src/index.ts'de basit "Hello World" function oluştur (test için)
  </action>
  <verify>
    - firebase.json dosyası mevcut ve functions config içeriyor
    - .firebaserc dosyası mevcut ve proje ID'si var
    - functions/package.json mevcut
    - functions/src/index.ts basit function içeriyor
    - npm run build (functions/ klasöründe) hatasız çalışıyor
  </verify>
  <done>Firebase projesi oluşturuldu, Functions initialized, TypeScript build çalışıyor</done>
</task>

<task type="auto">
  <name>Task 2: TypeScript configuration ve dependencies</name>
  <files>functions/tsconfig.json, functions/package.json</files>
  <action>
    1. functions/tsconfig.json ayarlarını kontrol et:
       - target: ES2020
       - module: commonjs
       - strict: true
       - esModuleInterop: true
       - outDir: lib
       - rootDir: src
    2. functions/package.json'a gerekli dependencies ekle:
       - firebase-functions (latest)
       - firebase-admin (latest)
       - axios (latest) - API calls için
       - Devependencies: typescript, @types/node
    3. npm install çalıştır (functions/ klasöründe)
    4. functions/package.json'da scripts güncelle:
       - "build": "tsc"
       - "serve": "npm run build && firebase emulators:start --only functions"
       - "deploy": "firebase deploy --only functions"
       - "logs": "firebase functions:log"
  </action>
  <verify>
    - functions/tsconfig.json doğru yapılandırılmış
    - functions/package.json'da tüm dependencies mevcut
    - npm run build başarılı
    - functions/lib/ klasörü oluşuyor ve JS dosyaları içeriyor
  </verify>
  <done>TypeScript configuration tamamlandı, tüm dependencies yüklendi, build çalışıyor</done>
</task>

<task type="auto">
  <name>Task 3: İlk test function deploy et</name>
  <files>functions/src/index.ts</files>
  <action>
    1. functions/src/index.ts'de basit HTTP trigger function yaz:
       - Function adı: "helloInstagram"
       - HTTP GET request kabul eden
       - JSON response: {"status": "ready", "message": "Instagram Automation API"}
    2. Export et: exports.helloInstagram
    3. npm run build çalıştır
    4. firebase deploy --only functions çalıştır
    5. Deploy edilen function URL'ini yakala (console output'tan)
    6. curl ile test et: curl {function-url} → 200 ve JSON response dönmeli
  </action>
  <verify>
    - firebase deploy başarılı
    - Console'da function URL görünüyor
    - curl {url} → 200 status ve JSON response {"status":"ready",...}
  </verify>
  <done>Test function deploy edildi, HTTP request'e response veriyor</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Firebase Cloud Function deploy edildi ve erişilebilir durumda</what-built>
  <how-to-verify>
    1. Firebase Console'u aç: https://console.firebase.google.com
    2. Proje seç (oluşturduğumuz proje)
    3. Functions sekmesine git
    4. "helloInstagram" function'ını gör
    5. Function URL'ine tıkla veya tarayıcıda aç
    6. Ekranda şu JSON görünmeli: {"status": "ready", "message": "Instagram Automation API"}
    7. Console'da error log yok (Functions → Logs sekmesinde)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] firebase --version çalışıyor
- [ ] Firebase projesi oluşturuldu
- [ ] functions/src/index.ts mevcut ve TypeScript kodu içeriyor
- [ ] npm run build (functions/) hatasız
- [ ] firebase deploy --only functions başarılı
- [ ] Deploy edilen function erişilebilir ve response veriyor
- [ ] Firebase Console'da function görünüyor
</verification>

<success_criteria>
- Tüm tasklar tamamlandı
- Firebase projesi oluşturuldu ve yapılandırıldı
- TypeScript build pipeline çalışıyor
- İlk Cloud Function deploy edildi ve test edildi
- No errors, temiz build output
- Human verified: Function Firebase Console'da görünüyor ve erişilebilir
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-setup/01-01-SUMMARY.md`:

# Phase 1 Plan 1: Firebase & TypeScript Kurulumu Summary

**Firebase Cloud Functions projesi kuruldu, TypeScript ile ilk function deploy edildi**

## Accomplishments
- Firebase projesi oluşturuldu (region: europe-west1)
- TypeScript configuration tamamlandı
- İlk test function deploy edildi ve çalışıyor

## Files Created/Modified
- `firebase.json` - Firebase project configuration
- `.firebaserc` - Firebase project ID
- `functions/package.json` - Dependencies ve scripts
- `functions/tsconfig.json` - TypeScript configuration
- `functions/src/index.ts` - İlk test function
- `.gitignore` - Firebase ve Node.js ignores

## Decisions Made
- Region: europe-west1 (Belçika) - Türkiye'ye yakın, düşük latency
- TypeScript target: ES2020
- Function naming convention: camelCase

## Issues Encountered
[Karşılaşılan sorunlar veya "None"]

## Next Step
Ready for 01-02-PLAN.md (Project Structure & Environment)
</output>
